# 餐饮店-点餐小程序

### 想了很久，决定开源！！！

背景：市面上不缺点餐系统，但是贵？不好用？所以我开发了这款非常适合餐饮店的点餐小程序。

一个基于微信云开发的餐饮店点餐小程序，支持会员充值、在线点餐、余额支付、免单机会等功能。

## 📸 效果展示

<!-- 在这里添加小程序效果图片，格式如下： -->
<!-- 
![首页](./miniprogram/images/bg.png)
![点餐页面](images/screenshot2.png)
![充值页面](images/screenshot3.png)
![订单页面](images/screenshot4.png)
![个人中心](images/screenshot5.png)
![管理后台](images/screenshot6.png)
-->

> 💡 **提示**：请将小程序截图放在 `images` 目录下，然后在上方添加图片链接

---

## ✨ 功能简介

### 🎯 核心功能

#### 1. 会员充值系统
- ✅ 充值即成为会员
- ✅ 充值金额1:1赠送等额余额
- ✅ 单笔充值满68元，额外赠送1次免单机会
- ✅ 多种充值套餐可选，灵活配置

#### 2. 在线点餐
- ✅ 菜品分类浏览，清晰直观
- ✅ 购物车管理，方便快捷
- ✅ 余额支付，无需找零
- ✅ 免单机会使用，优惠多多

#### 3. 订单管理
- ✅ 查看点餐订单，状态清晰
- ✅ 查看充值记录，一目了然
- ✅ 订单状态跟踪（待确认 → 制作中 → 已完成）
- ✅ 取消待确认订单，灵活方便

#### 4. 个人中心
- ✅ 余额查询，实时显示
- ✅ 免单次数显示
- ✅ 订单统计
- ✅ 会员信息管理

#### 5. 管理后台
- ✅ 菜品管理（添加、编辑、删除）
- ✅ 菜品分类管理
- ✅ 会员管理
- ✅ 订单管理
- ✅ 充值套餐管理
- ✅ 店铺信息设置
- ✅ 公告管理
- ✅ 桌码管理
- ✅ 打印机管理

### 🎨 设计特色

- ❤️ 红色主题，温馨大气
- 📱 简洁现代的UI设计
- 🚀 流畅的用户体验
- 💫 精美的动画效果

---

## 🚀 快速部署

### 环境要求

- 微信开发者工具（最新版本）
- 已注册的微信小程序账号
- 已开通微信云开发

### 部署步骤

#### 1. 获取项目代码

```bash
git clone [项目地址]
cd orderFood-wxCloud
```

#### 2. 配置云开发环境

1. 在微信开发者工具中打开项目
2. 开通云开发，创建云环境
3. 获取云环境ID（在云开发控制台顶部查看）

#### 3. 修改配置文件

**修改小程序入口文件** `miniprogram/app.js`（第18行）：

```javascript
wx.cloud.init({
  env: '你的云环境ID',  // 替换为你的实际环境ID
  traceUser: true,
})
```

**修改所有云函数配置文件**（在 `cloudfunctions` 目录下的各个云函数 `index.js` 文件中）：

将所有 `'填写你的环境ID'` 替换为你的实际云环境ID。

需要修改的云函数：
- `login/index.js`
- `getCategory/index.js`
- `doBuy/index.js`
- `pay/index.js`
- `pay_success/index.js`
- `get_code/index.js`
- `getPhoneNumber/index.js`
- `getUserList/index.js`
- `printBack/index.js`
- `printManage/index.js`

#### 4. 创建数据库集合

在云开发控制台 → 数据库中创建以下集合：

- `user` - 用户表
- `menu` - 菜品分类表
- `goods` - 菜品表
- `order` - 订单表
- `recharge` - 充值套餐表
- `freeBuy` - 免单记录表

> 💡 **提示**：`admin` 集合会在首次设置管理员密码时自动创建

#### 5. 上传云函数

在微信开发者工具中，右键点击 `cloudfunctions` 目录下的每个云函数文件夹，选择：

**云函数 → 上传并部署：云端安装依赖**

需要上传的云函数：
- `login` - 用户登录
- `getCategory` - 获取菜品分类
- `doBuy` - 执行购买/下单
- `pay` - 支付相关
- `pay_success` - 支付成功回调
- `get_code` - 获取验证码
- `getPhoneNumber` - 获取手机号
- `getUserList` - 获取用户列表
- `printBack` - 打印机回调
- `printManage` - 打印机管理

#### 6. 配置数据库权限

在云开发控制台 → 数据库 → 集合权限中，配置以下权限：

- **user**：仅创建者可读写
- **menu**：所有用户可读，仅创建者可写
- **goods**：所有用户可读，仅创建者可写
- **order**：仅创建者可读写
- **recharge**：所有用户可读，仅创建者可写
- **freeBuy**：仅创建者可读写

> 💡 **提示**：开发阶段可设置为"所有用户可读可写"便于测试

#### 7. 运行项目

1. 在微信开发者工具中点击"编译"按钮
2. 小程序会自动运行并显示在模拟器中

#### 8. 进入管理后台

1. 点击底部"我的"标签，进入个人中心
2. **在页面右下角空白区域连续快速点击 5 次**（1秒内完成）
3. 首次使用会弹出"设置管理员密码"弹窗，输入至少6位密码
4. 设置成功后自动跳转到管理后台
5. 在管理后台中可以：
   - 设置店铺信息
   - 添加菜品分类和菜品
   - 设置充值套餐
   - 管理订单和会员
   - 其他管理功能

### 📖 详细部署教程

如需更详细的部署说明，请查看：[从0到1完整部署教程](./部署教程-从0到1完整指南.md)

---

## 📝 其他说明

### 技术栈

- **前端**：微信小程序原生开发
- **后端**：微信云开发（云函数 + 云数据库）
- **UI框架**：Vant Weapp + ColorUI

### 打印机申请

如需使用小票打印功能，请访问：https://open.trenditiot.com 申请打印机 AppID

---

## 💰 打赏支持

如果这个项目对你有帮助，欢迎打赏支持！

<!-- 在这里添加打赏收款码图片，格式如下： -->
<!-- 
<div align="center">
  <img src="images/reward-wechat.png" width="300" alt="微信收款码"/>
  <img src="images/reward-alipay.png" width="300" alt="支付宝收款码"/>
</div>
-->

> 💡 **提示**：请将收款码图片放在 `images` 目录下，然后在上方添加图片链接

---

**祝生意兴隆！** 🎉
