<!--pages/admin/rechargeOptions/rechargeOptions.wxml-->
<view class="page">
  <!-- æ·»åŠ æŒ‰é’® -->
  <view class="add-btn" bindtap="showAddModal">
    <text class="add-icon">+</text>
    <text>æ·»åŠ å……å€¼é€‰é¡¹</text>
  </view>

  <!-- å……å€¼é€‰é¡¹åˆ—è¡¨ -->
  <view class="option-list">
    <view class="option-item" wx:for="{{options}}" wx:key="_id">
      <view class="option-badge" wx:if="{{item.isRecommend}}">ğŸ”¥ æ¨è</view>
      
      <view class="option-info">
        <view class="option-amount">
          <text class="amount-value">Â¥{{item.amount}}</text>
          <text class="give-amount" wx:if="{{item.giveAmount > 0}}">+é€Â¥{{item.giveAmount}}</text>
        </view>
        
        <view class="option-total" wx:if="{{item.giveAmount > 0}}">
          å®å¾—ï¼šÂ¥{{item.amount + item.giveAmount}}
        </view>
        
        <view class="option-desc" wx:if="{{item.description}}">
          {{item.description}}
        </view>
        
        <view class="option-meta">
          <text class="option-status {{item.status === 1 ? 'enabled' : 'disabled'}}">
            {{item.status === 1 ? 'âœ“ å·²å¯ç”¨' : 'âœ— å·²ç¦ç”¨'}}
          </text>
        </view>
      </view>
      
      <view class="option-actions">
        <view class="action-btn edit" bindtap="showEditModal" data-option="{{item}}">ç¼–è¾‘</view>
        <view class="action-btn delete" bindtap="deleteOption" data-option="{{item}}">åˆ é™¤</view>
      </view>
    </view>

    <van-empty wx:if="{{options.length === 0}}" description="æš‚æ— å……å€¼é€‰é¡¹" />
  </view>

  <!-- ç¼–è¾‘å¼¹çª— -->
  <view class="modal-mask" wx:if="{{showModal}}" catchtap="closeModal">
    <view class="modal-dialog" catchtap="stopPropagation">
      <view class="modal-title">{{editMode ? 'ç¼–è¾‘å……å€¼é€‰é¡¹' : 'æ·»åŠ å……å€¼é€‰é¡¹'}}</view>
      <view class="modal-content">
        <view class="form-item">
          <view class="form-label">å……å€¼é‡‘é¢ï¼ˆå…ƒï¼‰</view>
          <input 
            class="form-input" 
            type="digit" 
            placeholder="è¯·è¾“å…¥å……å€¼é‡‘é¢" 
            value="{{currentOption.amount}}"
            bindinput="onAmountInput"
          />
        </view>
        
        <view class="form-item">
          <view class="form-label">èµ é€é‡‘é¢ï¼ˆå…ƒï¼‰</view>
          <input 
            class="form-input" 
            type="digit" 
            placeholder="è¯·è¾“å…¥èµ é€é‡‘é¢ï¼Œå¯ä¸º0" 
            value="{{currentOption.giveAmount}}"
            bindinput="onGiveAmountInput"
          />
        </view>
        
        <view class="form-item">
          <view class="form-label">æè¿°ï¼ˆå¯é€‰ï¼‰</view>
          <input 
            class="form-input" 
            placeholder="å¦‚ï¼šè¶…å€¼ä¼˜æƒ " 
            value="{{currentOption.description}}"
            bindinput="onDescriptionInput"
          />
        </view>
        
        <view class="form-item">
          <view class="form-label">è®¾ä¸ºæ¨è</view>
          <switch checked="{{currentOption.isRecommend}}" bindchange="toggleRecommend" color="#667eea"/>
        </view>

        <view class="form-item">
          <view class="form-label">å¯ç”¨çŠ¶æ€</view>
          <switch checked="{{currentOption.status === 1}}" bindchange="toggleStatus" color="#667eea"/>
        </view>
      </view>
      <view class="modal-footer">
        <view class="modal-btn cancel" bindtap="closeModal">å–æ¶ˆ</view>
        <view class="modal-btn confirm" bindtap="saveOption">ä¿å­˜</view>
      </view>
    </view>
  </view>
</view>

